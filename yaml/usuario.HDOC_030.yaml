csv:

  keys:
    - USUARIO

sql:

  db: systextil

  key_count: |
    SELECT
      count(u.EMPRESA)
    from HDOC_030 u
    where u.USUARIO = :USUARIO
      and u.USUARIO not in ('INTERSYS', 'INTERSYS1', 'TREINAMENTO',
               'MENUS', 'CONVERTIDOS', 'TREINAMENTO', 'MASTER', 'DUOMO')

  update: |
    UPDATE HDOC_030 u
    set
      u.EMPRESA = :EMPRESA
    , u.NOME_EDITOR = :NOME_EDITOR
    , u.OBSERVACAO = :OBSERVACAO
    , u.REQUISITA_ESTOQUE = :REQUISITA_ESTOQUE
    , u.CODIGO_USUARIO = :CODIGO_USUARIO
    , u.CC_AGRUPADOR = :CC_AGRUPADOR
    , u.TIPO_IMPRESSAO = :TIPO_IMPRESSAO
    , u.BALANCA = :BALANCA
    , u.COD_BALANCA = :COD_BALANCA
    , u.LIBERA_PV_N1 = :LIBERA_PV_N1
    , u.LIBERA_PV_N2 = :LIBERA_PV_N2
    , u.LIBERA_PV_N4 = :LIBERA_PV_N4
    , u.LIBERA_PV_N7 = :LIBERA_PV_N7
    , u.IMPRESSORA_TERMICA = :IMPRESSORA_TERMICA
    , u.PERMISSAO_ESTOQUE = :PERMISSAO_ESTOQUE
    , u.ESTAGIO_DIG_REJEICAO = :ESTAGIO_DIG_REJEICAO
    , u.VISUALIZA_VALORES = :VISUALIZA_VALORES
    , u.IMPRESSORA_PADRAO_ETIQUETA = :IMPRESSORA_PADRAO_ETIQUETA
    , u.LOGINS_PERMITIDOS = :LOGINS_PERMITIDOS
    , u.LOGINS_USADOS = :LOGINS_USADOS
    , u.TIPO_ORDEM_BENEFIC = :TIPO_ORDEM_BENEFIC
    , u.AGRUPA_CANC_PED = :AGRUPA_CANC_PED
    , u.ALTERA_DESTINO_OB = :ALTERA_DESTINO_OB
    , u.ALT_END_COBR_ENT = :ALT_END_COBR_ENT
    , u.LIBERACAO_PESAGEM = :LIBERACAO_PESAGEM
    , u.ALTERA_DATA_HORA = :ALTERA_DATA_HORA
    , u.ALTERA_DESC_LOJA = :ALTERA_DESC_LOJA
    , u.CAMINHO_IMP_CHEQUE = :CAMINHO_IMP_CHEQUE
    , u.CAMINHO_RET_CHEQUE = :CAMINHO_RET_CHEQUE
    , u.E_MAIL = :E_MAIL
    , u.USER_ID_E_MAIL = :USER_ID_E_MAIL
    , u.CORPO_E_MAIL = :CORPO_E_MAIL
    , u.COD_TIPO_IF = :COD_TIPO_IF
    , u.REJ_TEC_ACAB = :REJ_TEC_ACAB
    , u.ATENDE_SIA = :ATENDE_SIA
    , u.ORDEM_BENEF_TESTE = :ORDEM_BENEF_TESTE
    , u.LOCALE = :LOCALE
    , u.LOJA_TELA_INICIAL = :LOJA_TELA_INICIAL
    , u.PERMITE_REPESAGEM = :PERMITE_REPESAGEM
    , u.CENTRO_CUSTO = :CENTRO_CUSTO
    , u.IMP_CHEQUE = :IMP_CHEQUE
    , u.ATIVO_INATIVO = :ATIVO_INATIVO
    , u.ASSINATURA_USUARIO = :ASSINATURA_USUARIO
    , u.CARREGA_PV_N_MARC = :CARREGA_PV_N_MARC
    , u.MENU_USUARIO = :MENU_USUARIO
    , u.TELA_LIB_PED_COMP = :TELA_LIB_PED_COMP
    , u.PERMITE_ESTORNAR_OPERACOES = :PERMITE_ESTORNAR_OPERACOES
    , u.PASSA_PROCESSO_LIBERACAO = :PASSA_PROCESSO_LIBERACAO
    , u.ALOCACAO_ROLOS = :ALOCACAO_ROLOS
    , u.TIPO_ORDEM_CONF = :TIPO_ORDEM_CONF
    , u.TIPO_ACESSO_ORCAMENTO = :TIPO_ACESSO_ORCAMENTO
    , u.TIPO_USUARIO_LOJA = :TIPO_USUARIO_LOJA
    , u.BANCO_CAIXA = :BANCO_CAIXA
    , u.CONTA_CORR_CAIXA = :CONTA_CORR_CAIXA
    , u.REABRE_VENDA = :REABRE_VENDA
    , u.ALTERA_ITENS_ORCAMENTO = :ALTERA_ITENS_ORCAMENTO
    , u.TELA_LIB_NF = :TELA_LIB_NF
    , u.CAMINHO_FRE_CHEQUE = :CAMINHO_FRE_CHEQUE
    , u.CAMINHO_VER_CHEQUE = :CAMINHO_VER_CHEQUE
    , u.COMPRADOR = :COMPRADOR
    , u.COD_REPRESENTANTE = :COD_REPRESENTANTE
    , u.INF_PESO_MANU = :INF_PESO_MANU
    , u.CODIGO_RAMA = :CODIGO_RAMA
    , u.CODIGO_CRACHA = :CODIGO_CRACHA
    , u.DEPOSITO_QUIMICOS = :DEPOSITO_QUIMICOS
    , u.CODIGO_COMPRADOR = :CODIGO_COMPRADOR
    where u.USUARIO = :USUARIO
      and u.USUARIO not in ('INTERSYS', 'INTERSYS1', 'TREINAMENTO', 'INTERSYS',
               'MENUS', 'CONVERTIDOS', 'TREINAMENTO', 'MASTER', 'DUOMO')

  insert: |
    INSERT INTO HDOC_030 (
      USUARIO
    , EMPRESA
    , NOME_EDITOR
    , OBSERVACAO
    , REQUISITA_ESTOQUE
    , CODIGO_USUARIO
    , CC_AGRUPADOR
    , TIPO_IMPRESSAO
    , BALANCA
    , COD_BALANCA
    , LIBERA_PV_N1
    , LIBERA_PV_N2
    , LIBERA_PV_N4
    , LIBERA_PV_N7
    , IMPRESSORA_TERMICA
    , PERMISSAO_ESTOQUE
    , ESTAGIO_DIG_REJEICAO
    , VISUALIZA_VALORES
    , IMPRESSORA_PADRAO_ETIQUETA
    , LOGINS_PERMITIDOS
    , LOGINS_USADOS
    , TIPO_ORDEM_BENEFIC
    , AGRUPA_CANC_PED
    , ALTERA_DESTINO_OB
    , ALT_END_COBR_ENT
    , LIBERACAO_PESAGEM
    , ALTERA_DATA_HORA
    , ALTERA_DESC_LOJA
    , CAMINHO_IMP_CHEQUE
    , CAMINHO_RET_CHEQUE
    , E_MAIL
    , USER_ID_E_MAIL
    , CORPO_E_MAIL
    , COD_TIPO_IF
    , REJ_TEC_ACAB
    , ATENDE_SIA
    , ORDEM_BENEF_TESTE
    , LOCALE
    , LOJA_TELA_INICIAL
    , PERMITE_REPESAGEM
    , CENTRO_CUSTO
    , IMP_CHEQUE
    , ATIVO_INATIVO
    , ASSINATURA_USUARIO
    , CARREGA_PV_N_MARC
    , MENU_USUARIO
    , TELA_LIB_PED_COMP
    , PERMITE_ESTORNAR_OPERACOES
    , PASSA_PROCESSO_LIBERACAO
    , ALOCACAO_ROLOS
    , TIPO_ORDEM_CONF
    , TIPO_ACESSO_ORCAMENTO
    , TIPO_USUARIO_LOJA
    , BANCO_CAIXA
    , CONTA_CORR_CAIXA
    , REABRE_VENDA
    , ALTERA_ITENS_ORCAMENTO
    , TELA_LIB_NF
    , CAMINHO_FRE_CHEQUE
    , CAMINHO_VER_CHEQUE
    , COMPRADOR
    , COD_REPRESENTANTE
    , INF_PESO_MANU
    , CODIGO_RAMA
    , CODIGO_CRACHA
    , DEPOSITO_QUIMICOS
    , CODIGO_COMPRADOR
    ) VALUES (
      :USUARIO
    , :EMPRESA
    , :NOME_EDITOR
    , :OBSERVACAO
    , :REQUISITA_ESTOQUE
    , :CODIGO_USUARIO
    , :CC_AGRUPADOR
    , :TIPO_IMPRESSAO
    , :BALANCA
    , :COD_BALANCA
    , :LIBERA_PV_N1
    , :LIBERA_PV_N2
    , :LIBERA_PV_N4
    , :LIBERA_PV_N7
    , :IMPRESSORA_TERMICA
    , :PERMISSAO_ESTOQUE
    , :ESTAGIO_DIG_REJEICAO
    , :VISUALIZA_VALORES
    , :IMPRESSORA_PADRAO_ETIQUETA
    , :LOGINS_PERMITIDOS
    , :LOGINS_USADOS
    , :TIPO_ORDEM_BENEFIC
    , :AGRUPA_CANC_PED
    , :ALTERA_DESTINO_OB
    , :ALT_END_COBR_ENT
    , :LIBERACAO_PESAGEM
    , :ALTERA_DATA_HORA
    , :ALTERA_DESC_LOJA
    , :CAMINHO_IMP_CHEQUE
    , :CAMINHO_RET_CHEQUE
    , :E_MAIL
    , :USER_ID_E_MAIL
    , :CORPO_E_MAIL
    , :COD_TIPO_IF
    , :REJ_TEC_ACAB
    , :ATENDE_SIA
    , :ORDEM_BENEF_TESTE
    , :LOCALE
    , :LOJA_TELA_INICIAL
    , :PERMITE_REPESAGEM
    , :CENTRO_CUSTO
    , :IMP_CHEQUE
    , :ATIVO_INATIVO
    , :ASSINATURA_USUARIO
    , :CARREGA_PV_N_MARC
    , :MENU_USUARIO
    , :TELA_LIB_PED_COMP
    , :PERMITE_ESTORNAR_OPERACOES
    , :PASSA_PROCESSO_LIBERACAO
    , :ALOCACAO_ROLOS
    , :TIPO_ORDEM_CONF
    , :TIPO_ACESSO_ORCAMENTO
    , :TIPO_USUARIO_LOJA
    , :BANCO_CAIXA
    , :CONTA_CORR_CAIXA
    , :REABRE_VENDA
    , :ALTERA_ITENS_ORCAMENTO
    , :TELA_LIB_NF
    , :CAMINHO_FRE_CHEQUE
    , :CAMINHO_VER_CHEQUE
    , :COMPRADOR
    , :COD_REPRESENTANTE
    , :INF_PESO_MANU
    , :CODIGO_RAMA
    , :CODIGO_CRACHA
    , :DEPOSITO_QUIMICOS
    , :CODIGO_COMPRADOR
    )

  after_insert_update:

    columns:
      - USUARIO

    command1: |
      DELETE FROM HDOC_033 u
      where u.usu_prg_cdusu = :USUARIO

    command2: |
      INSERT INTO HDOC_033 y
      ( y.USU_PRG_CDUSU, y.USU_PRG_EMPR_USU, y.PROGRAMA, y.NOME_MENU, y.ITEM_MENU, y.ORDEM_MENU
      , y.INCLUIR, y.MODIFICAR, y.EXCLUIR, y.PROCURAR, y.COORDENADA_X, y.COORDENADA_Y, y.MARGEM_ESQ_RELATORIOS)
      SELECT
        :USUARIO USU_PRG_CDUSU
      , x.USU_PRG_EMPR_USU
      , x.PROGRAMA
      , x.NOME_MENU
      , x.ITEM_MENU
      , x.ORDEM_MENU
      , x.INCLUIR
      , x.MODIFICAR
      , x.EXCLUIR
      , x.PROCURAR
      , x.COORDENADA_X
      , x.COORDENADA_Y
      , x.MARGEM_ESQ_RELATORIOS
      FROM HDOC_033 x
      WHERE x.usu_prg_cdusu = 'DUOMO'

  key_list: |
    SELECT
      u.USUARIO
    from HDOC_030 u
    where u.USUARIO not in ('INTERSYS', 'INTERSYS1', 'TREINAMENTO',
               'MENUS', 'CONVERTIDOS', 'TREINAMENTO', 'MASTER', 'DUOMO')

  delete: |
    DELETE FROM HDOC_030 u
    where u.USUARIO = :USUARIO
      and u.USUARIO not in ('INTERSYS', 'INTERSYS1', 'TREINAMENTO',
               'MENUS', 'CONVERTIDOS', 'TREINAMENTO', 'MASTER', 'DUOMO')

  fault_delete: |
    UPDATE HDOC_030 u
    set
      u.ATIVO_INATIVO = 2
    where u.USUARIO = :USUARIO
      and u.USUARIO not in ('INTERSYS', 'INTERSYS1', 'TREINAMENTO',
               'MENUS', 'CONVERTIDOS', 'TREINAMENTO', 'MASTER', 'DUOMO')
