csv:

  fields:

    CODIGO_OPERACAO:
      type: integer

  keys:
    - CODIGO_OPERACAO

sql:

  db: systextil

  key_count: |
    SELECT
      count(o.NOME_OPERACAO)
    from MQOP_040 o
    where o.CODIGO_OPERACAO = :CODIGO_OPERACAO

  update: |
    UPDATE MQOP_040 o
    set
      GRUPO_MAQUINAS = '0001' -- GRUPO_MAQUINAS
    , NOME_OPERACAO = :NOME_OPERACAO
    , TIPO_OPERACAO = 2 -- TIPO_OPERACAO
    , PEDE_PRODUTO = 2 -- PEDE_PRODUTO
    , SUB_MAQUINA = '001' -- SUB_MAQUINA
    , CODIGO_CARGO = 0 -- CODIGO_CARGO
    , CLASSIFICACAO = 1 -- CLASSIFICACAO
    , OPERANDO = 1 -- OPERANDO
    , TEMPO_MAQUINA = 0 -- TEMPO_MAQUINA
    , TEMPO_HOMEM = 0 -- TEMPO_HOMEM
    , OBSERVACAO = NULL -- OBSERVACAO
    , CENTIMETROS_LINHA = 0 -- CENTIMETROS_LINHA
    , CODIGO_APARELHO = ' ' -- CODIGO_APARELHO
    , CLASSIFICACAO_MAQ = 0 -- CLASSIFICACAO_MAQ
    , CATEGORIA_PAGAMENTO = '3' -- CATEGORIA_PAGAMENTO
    , ATALHO_ANEXO = NULL -- ATALHO_ANEXO
    , DESCR_OPERACAO = NULL -- DESCR_OPERACAO
    , REPLICA_TEMPO = 1 -- REPLICA_TEMPO
    , COD_PARTE = NULL -- COD_PARTE
    , FAM_PARTE = NULL -- FAM_PARTE
    , COD_OPERACAO_BASICA = 0 -- COD_OPERACAO_BASICA
    where o.CODIGO_OPERACAO = :CODIGO_OPERACAO

  insert: |
    INSERT INTO MQOP_040 (
      CODIGO_OPERACAO
    , GRUPO_MAQUINAS
    , NOME_OPERACAO
    , TIPO_OPERACAO
    , PEDE_PRODUTO
    , SUB_MAQUINA
    , CODIGO_CARGO
    , CLASSIFICACAO
    , OPERANDO
    , TEMPO_MAQUINA
    , TEMPO_HOMEM
    , OBSERVACAO
    , CENTIMETROS_LINHA
    , CODIGO_APARELHO
    , CLASSIFICACAO_MAQ
    , CATEGORIA_PAGAMENTO
    , ATALHO_ANEXO
    , DESCR_OPERACAO
    , REPLICA_TEMPO
    , COD_PARTE
    , FAM_PARTE
    , COD_OPERACAO_BASICA
    ) VALUES (
      :CODIGO_OPERACAO
    , '0001' -- GRUPO_MAQUINAS
    , :NOME_OPERACAO
    , 2 -- TIPO_OPERACAO
    , 2 -- PEDE_PRODUTO
    , '001' -- SUB_MAQUINA
    , 0 -- CODIGO_CARGO
    , 1 -- CLASSIFICACAO
    , 1 -- OPERANDO
    , 0 -- TEMPO_MAQUINA
    , 0 -- TEMPO_HOMEM
    , NULL -- OBSERVACAO
    , 0 -- CENTIMETROS_LINHA
    , ' ' -- CODIGO_APARELHO
    , 0 -- CLASSIFICACAO_MAQ
    , '3' -- CATEGORIA_PAGAMENTO
    , NULL -- ATALHO_ANEXO
    , NULL -- DESCR_OPERACAO
    , 1 -- REPLICA_TEMPO
    , NULL -- COD_PARTE
    , NULL -- FAM_PARTE
    , 0 -- COD_OPERACAO_BASICA
    )

  key_list: |
    SELECT
      o.CODIGO_OPERACAO
    from MQOP_040 o

  delete: |
    DELETE FROM MQOP_040 o
    where o.CODIGO_OPERACAO = :CODIGO_OPERACAO

  fault_delete: |
    UPDATE MQOP_040 o
    set
      o.NOME_OPERACAO = substr('##' || o.NOME_OPERACAO, 1, 50)
    where o.CODIGO_OPERACAO = :CODIGO_OPERACAO
      and o.NOME_OPERACAO not like '##%'
